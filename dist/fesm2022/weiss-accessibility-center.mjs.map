{"version":3,"file":"weiss-accessibility-center.mjs","sources":["../../src/lib/weiss-accessibility-center.service.ts","../../src/lib/templates/panel/panel.component.ts","../../src/lib/templates/panel/panel.component.html","../../src/lib/templates/strip/strip.component.ts","../../src/lib/templates/strip/strip.component.html","../../src/lib/weiss-accessibility-center.factory.ts","../../src/lib/weiss-accessibility-center.component.ts","../../src/lib/weiss-accessibility-center.directive.ts","../../src/lib/weiss-accessibility-center.module.ts","../../src/public-api.ts","../../src/weiss-accessibility-center.ts"],"sourcesContent":["import { Inject, Injectable, PLATFORM_ID } from \"@angular/core\";\nimport { BehaviorSubject, Observable } from \"rxjs\";\nimport {\n  WeissAccessibilitySettings,\n  ModuleDataOptions,\n} from \"./weiss-accessibility-center.interfaces\";\nimport { DOCUMENT, isPlatformBrowser } from \"@angular/common\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class WeissAccessibilityCenterService {\n  // Browser check for SSR/clientside compatibility\n  private isBrowser: boolean;\n\n  public weissAccessibilityThemes: ModuleDataOptions[] = [\n    { name: \"Default light\", value: \"default\" },\n    { name: \"Default dark\", value: \"dynamic-dark\" },\n    { name: \"High contrast\", value: \"high-contrast\" },\n    { name: \"Monochrome\", value: \"monochrome\" },\n  ];\n\n  public weissAccessibilityFontSizes: ModuleDataOptions[] = [\n    { name: \"Decrease to 85%\", value: \"smaller\" },\n    { name: \"Default at 100%\", value: \"default\" },\n    { name: \"Increase to 125%\", value: \"large\" },\n    { name: \"Increase to 150%\", value: \"larger\" },\n    { name: \"Increase to 200%\", value: \"largest\" },\n  ];\n\n  public weissAccessibilitySpacing: ModuleDataOptions[] = [\n    { name: \"Compact spacing\", value: \"compact\" },\n    { name: \"Cozy spacing\", value: \"default\" },\n    { name: \"Comfort spacing\", value: \"comfort\" },\n    { name: \"Extra-comfort spacing\", value: \"extra-comfort\" },\n  ];\n\n  public weissAccessibilityLayouts: ModuleDataOptions[] = [\n    { name: \"Default layout\", value: \"default\" },\n    { name: \"Single column\", value: \"mobile\" },\n  ];\n\n  public weissAccessibilityLanguages: ModuleDataOptions[] = [\n    { name: \"العربية\", value: \"ar\" },\n    { name: \"中文\", value: \"zh-CN\" },\n    { name: \"English\", value: \"en\" },\n    { name: \"Español\", value: \"es\" },\n    { name: \"Français\", value: \"fr\" },\n    { name: \"Русский\", value: \"ru\" },\n  ];\n\n  public defaultWeissAccessibilitySettings: WeissAccessibilitySettings = {\n    fontSize: \"default\",\n    theme: \"default\",\n    spacing: \"default\",\n    language: \"en\",\n    layout: \"default\",\n  };\n\n  private defaultId: string = 'weiss-accessibility-center';\n  private targetIdSubject = new BehaviorSubject<string>(this.defaultId);\n  readonly targetId$ = this.targetIdSubject.asObservable();\n\n  setTargetId(id: string | null) {\n    this.targetIdSubject.next(id || this.defaultId);\n  }\n\n  // BehaviorSubject to hold and broadcast the current accessibility settings\n  private accessibilitySettingsSubject: BehaviorSubject<WeissAccessibilitySettings>;\n\n  // Observable to allow components to subscribe and react to settings changes\n  weissAccessibilitySettings$: Observable<WeissAccessibilitySettings>;\n\n  private target: HTMLElement | null = null;\n  private showWeissAccessibilityCenter = new BehaviorSubject<boolean>(false);\n  showWeissAccessibilityCenter$ =\n    this.showWeissAccessibilityCenter.asObservable();\n\n  toggleWeissAccessibilityCenter(\n    targetElement?: HTMLElement | null,\n    forceClose: boolean = false\n  ) {\n    if (forceClose) this.showWeissAccessibilityCenter.next(false);\n    else\n      this.showWeissAccessibilityCenter.next(\n        !this.showWeissAccessibilityCenter.value\n      );\n\n    // Store the target element for focus restoration\n    if (targetElement) {\n      this.target =\n        targetElement.closest(\"button, [tabindex]\") || targetElement;\n    }\n    if (!this.target) {\n      this.target = this.document.getElementById(\"weiss-a11y-toggle\");\n    }\n    // If widget has been closed, return focus to the the target\n    if (!this.showWeissAccessibilityCenter.value) {\n      if (this.target) {\n        this.target.focus();\n        this.target = null;\n      }\n    }\n  }\n\n  constructor(\n    @Inject(DOCUMENT) private document: Document,\n    @Inject(PLATFORM_ID) private platformId: Object\n  ) {\n    this.isBrowser = isPlatformBrowser(this.platformId);\n    // On service initialization, load saved settings or use default ones\n    const savedSettings = this.getSavedSettings();\n\n    // Initialize BehaviorSubject with the saved/default settings\n    this.accessibilitySettingsSubject =\n      new BehaviorSubject<WeissAccessibilitySettings>(savedSettings);\n\n    // Expose the subject as an observable\n    this.weissAccessibilitySettings$ =\n      this.accessibilitySettingsSubject.asObservable();\n\n    // Apply the loaded or default settings to the document root\n    this.applySettings(savedSettings);\n  }\n\n  // Method to update accessibility settings (partially or fully)\n  updateSettings(newSettings: Partial<WeissAccessibilitySettings>): void {\n    const updatedSettings = {\n      ...this.accessibilitySettingsSubject.value,\n      ...newSettings,\n    };\n\n    this.accessibilitySettingsSubject.next(updatedSettings);\n\n    if (this.isBrowser) {\n      localStorage.setItem(\n        \"weiss-accessibility-settings\",\n        JSON.stringify(updatedSettings)\n      );\n    }\n\n    this.applySettings(updatedSettings);\n  }\n\n  // Method to retrieve the current settings from the BehaviorSubject\n  getCurrentSettings(): WeissAccessibilitySettings {\n    return this.accessibilitySettingsSubject.value; // Returns the current settings\n  }\n\n  // Method to get saved settings from localStorage or return default settings\n  private getSavedSettings(): WeissAccessibilitySettings {\n    this.defaultWeissAccessibilitySettings.language =\n      this.getSupportedLanguage();\n\n    if (!this.isBrowser) {\n      return this.defaultWeissAccessibilitySettings;\n    }\n\n    try {\n      const savedSettings = JSON.parse(\n        localStorage.getItem(\"weiss-accessibility-settings\") || \"null\"\n      );\n      return savedSettings\n        ? { ...this.defaultWeissAccessibilitySettings, ...savedSettings }\n        : this.defaultWeissAccessibilitySettings;\n    } catch {\n      return this.defaultWeissAccessibilitySettings;\n    }\n  }\n\n  // Method to apply the accessibility settings to the root element (HTML)\n  private applySettings(settings: WeissAccessibilitySettings): void {\n    const root = this.document.documentElement; // Get the root HTML element\n\n    // Apply font size, theme, spacing, and language settings as attributes\n    root.setAttribute(\"data-weiss-accessibility-font-size\", settings.fontSize);\n    root.setAttribute(\"data-weiss-accessibility-theme\", settings.theme);\n    root.setAttribute(\"data-weiss-accessibility-spacing\", settings.spacing);\n    root.setAttribute(\"data-weiss-accessibility-language\", settings.language);\n    root.setAttribute(\"data-weiss-accessibility-layout\", settings.layout);\n    root.setAttribute(\"lang\", settings.language);\n\n    // If the language is Arabic ('ar'), set the direction to RTL (Right-to-Left)\n    if (settings.language === \"ar\") {\n      root.setAttribute(\"dir\", \"rtl\");\n    } else {\n      root.setAttribute(\"dir\", \"\"); // Otherwise, reset direction to LTR (Left-to-Right)\n    }\n  }\n\n  // Method to reset settings to default values, or optionally only specified settings\n  resetSettings(onlyThese: Array<keyof WeissAccessibilitySettings> = []): void {\n    console.log(\"Resetting: \" + onlyThese);\n    // If no specific settings were provided, reset all settings to default\n    if (onlyThese.length === 0) {\n      this.updateSettings(this.defaultWeissAccessibilitySettings);\n    } else {\n      // Otherwise, only reset the specified settings to their default values\n      const resetSettings: Partial<WeissAccessibilitySettings> = {};\n\n      // Loop through the specified settings and set them to their default values\n      onlyThese.forEach((setting) => {\n        resetSettings[setting] =\n          this.defaultWeissAccessibilitySettings[setting];\n      });\n\n      // Update the settings with the reset values\n      this.updateSettings(resetSettings);\n    }\n  }\n\n  getBrowserLanguage(): string {\n    if (this.isBrowser) {\n      const language = navigator.language || navigator.languages[0];\n      return this.normalizeLanguageCode(language);\n    }\n\n    return \"en\";\n  }\n\n  // Normalize the language code (e.g., \"en-US\" -> \"en\")\n  normalizeLanguageCode(languageCode: string): string {\n    return languageCode.split(\"-\")[0]; // Split by \"-\" and return the base code\n  }\n\n  getSupportedLanguage(): string {\n    const browserLanguage = this.getBrowserLanguage();\n\n    // Check if the normalized browser language exists in weissAccessibilityLanguages\n    const foundLanguage = this.weissAccessibilityLanguages.find(\n      (lang) => lang.value === browserLanguage\n    );\n\n    if (foundLanguage) {\n      return foundLanguage.value;\n    }\n\n    // Fallback to a default language if no match is found\n    return \"en\";\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n  ViewEncapsulation,\n  ViewChildren,\n  ElementRef,\n  QueryList,\n  ViewChild,\n  SimpleChanges,\n} from \"@angular/core\";\nimport { CommonModule, AsyncPipe } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\nimport {\n  PanelData,\n  ModuleTypes,\n} from \"../../weiss-accessibility-center.interfaces\";\nimport { WeissAccessibilityCenterService } from \"../../weiss-accessibility-center.service\";\n\n@Component({\n  selector: \"weiss-accessibility-panel\",\n  standalone: true,\n  imports: [CommonModule, FormsModule, AsyncPipe],\n  templateUrl: \"./panel.component.html\",\n  styleUrl: \"./panel.component.scss\",\n  encapsulation: ViewEncapsulation.None,\n})\nexport class PanelComponent {\n  @Input() data: PanelData | undefined;\n  // Optional translated labels provided through data/title or external mapping\n  @Input() closeLabel?: string;\n  @Input() resetAllLabel?: string;\n  @Input() resetStatusMessage?: string;\n  @Output() statusMessageChange = new EventEmitter<string>();\n  @ViewChild(\"accessibilityPanel\") panelContent!: ElementRef;\n  @ViewChildren(\"accordionButton\") accordionButtons!: QueryList<ElementRef>;\n\n  multiSelectable: boolean = false;\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['data'] && this.data) {\n      this.multiSelectable = this.data.multiSelectableAccordions ?? false;\n    }\n  }\n\n  private scrollElementIntoView(element: Element) {\n    element.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"center\",\n    });\n  }\n\n  handleKeyboardEvent(event: KeyboardEvent, sectionId: string) {\n    // Check if the key pressed is Enter or Space\n    if (event.key === \"Enter\" || event.key === \" \") {\n      // Wait for DOM update\n      setTimeout(() => {\n        const contentElement = document.getElementById(sectionId);\n        if (contentElement && this.expand[sectionId]) {\n          this.scrollElementIntoView(contentElement);\n        }\n      }, 0);\n    }\n  }\n\n  public moduleKeys: ModuleTypes[] = [];\n\n  public expand: { [key in ModuleTypes]?: boolean } = {};\n\n  constructor(\n    public weissAccessibilityCenterService: WeissAccessibilityCenterService\n  ) {}\n\n  public close(): void {\n    this.weissAccessibilityCenterService.toggleWeissAccessibilityCenter(\n      null,\n      true\n    );\n  }\n\n  ngOnInit() {\n    if (this.data) {\n      this.multiSelectable = this.data.multiSelectableAccordions?? false;\n      this.moduleKeys = Object.keys(this.data.modules) as ModuleTypes[];\n      this.expand = this.moduleKeys.reduce((acc, module) => {\n        acc[module] = false;\n        return acc;\n      }, {} as { [key in ModuleTypes]?: boolean });\n    }\n  }\n\n}\n","<section class=\"weiss-accessibility-center-panel\" [ngClass]=\"{'weiss-accessibility-center-panel--right': data?.position === 'end' || data?.position === 'right', 'weiss-accessibility-center-panel--left': data?.position === 'start' || data?.position === 'left'}\">\n    <div class=\"weiss-accessibility-center-panel__header display-flex flex-column\">\n        <div class=\"display-flex flex-align-start gap-1 flex-justify\">\n            <h2 id=\"accessibilityCenterTitle\" class=\"margin-0\">\n                {{data?.title}}\n            </h2>\n            <button type=\"button\" class=\"usa-button usa-button--unstyled width-auto text-no-underline margin-left-auto\"\n                #closeButton (click)=\"close()\">\n                {{ closeLabel || 'Close' }}\n                <svg xmlns=\"http://www.w3.org/2000/svg\" role=\"img\" aria-hidden=\"true\" width=\"24\" height=\"24\"\n                    viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\" class=\"icon icon-tabler icons-tabler-outline icon-tabler-x\">\n                    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n                    <path d=\"M18 6l-12 12\" />\n                    <path d=\"M6 6l12 12\" />\n                </svg>\n            </button>\n        </div>\n        <p>{{data?.description}}</p>\n    </div>\n    <div #accessibilityPanel class=\"display-flex flex-1 overflow-auto flex-column weiss-accessibility-center-panel__content\">\n        <div class=\"display-flex flex-column gap-1 usa-accordion usa-accordion--bordered\" [ngClass]=\"{'usa-accordion--multiselectable': multiSelectable}\" role=\"list\" [attr.data-allow-multiple]=\"multiSelectable ? '' : null\">\n            <span *ngIf=\"data?.modules?.fontSize\" role=\"listitem\">\n                <h3 class=\"usa-accordion__heading\">\n                    <button type=\"button\" #accordionButton class=\"usa-accordion__button display-flex flex-align-center gap-1\" \n                    aria-controls=\"accessibilityText\" [attr.aria-expanded]=\"expand['fontSize']\">\n                    <svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\"\n                    class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2.25\"\n                    stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                    <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n                    <path d=\"M3 7v-2h13v2\" />\n                    <path d=\"M10 5v14\" />\n                    <path d=\"M12 19h-4\" />\n                    <path d=\"M15 13v-1h6v1\" />\n                    <path d=\"M18 12v7\" />\n                    <path d=\"M17 19h2\" />\n                </svg>\n                        {{data?.modules?.fontSize?.title}}\n                    </button>\n                </h3>\n                <div id=\"accessibilityText\" class=\"usa-accordion__content usa-prose\" [hidden]=\"!expand['fontSize']\">\n                    <form>\n                        <fieldset class=\"usa-fieldset usa-prose display-flex flex-column gap-05 usa-prose\">\n                            <legend class=\"usa-legend margin-top-0 margin-bottom-2\">\n                                {{data?.modules?.fontSize?.description}}\n                            </legend>\n                            <div class=\"usa-radio margin-top-0\" *ngFor=\"let item of data?.modules?.fontSize?.data\">\n                                <input class=\"usa-radio__input usa-radio__input--tile\"\n                                    id=\"accessibility-font-size-{{item.value}}\" type=\"radio\"\n                                    #radioInput\n                                    name=\"accessibility-font-size\"\n                                    [ngModel]=\"(weissAccessibilityCenterService.weissAccessibilitySettings$ | async)?.fontSize\"\n                                    (ngModelChange)=\"weissAccessibilityCenterService.updateSettings({ fontSize: $any($event) })\"\n                                    [value]=\"item.value\" />\n                                <label class=\"usa-radio__label\"\n                                    for=\"accessibility-font-size-{{item.value}}\">{{item.name}}</label>\n                            </div>\n                        </fieldset>\n                    </form>\n                </div>\n            </span>\n            <span *ngIf=\"data?.modules?.spacing\" role=\"listitem\">\n                <h3 class=\"usa-accordion__heading\">\n                    <button type=\"button\" #accordionButton class=\"usa-accordion__button display-flex flex-align-center gap-1\" \n                    aria-controls=\"accessibilitySpacing\" [attr.aria-expanded]=\"expand['spacing']\">\n                    <svg  xmlns=\"http://www.w3.org/2000/svg\"  width=\"24\"  height=\"24\"  viewBox=\"0 0 24 24\"  fill=\"none\"  stroke=\"currentColor\"  stroke-width=\"2\"  stroke-linecap=\"round\"  stroke-linejoin=\"round\"  class=\"icon\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M8 7l4 -4l4 4\" /><path d=\"M8 17l4 4l4 -4\" /><path d=\"M12 3l0 18\" /></svg>\n                        {{data?.modules?.spacing?.title}}\n                    </button>\n                </h3>\n                <div id=\"accessibilitySpacing\" class=\"usa-accordion__content usa-prose\" [hidden]=\"!expand['spacing']\">\n                    <form>\n                        <fieldset class=\"usa-fieldset usa-prose display-flex flex-column gap-05 usa-prose\">\n                            <legend class=\"usa-legend margin-top-0 margin-bottom-2\">\n                                {{data?.modules?.spacing?.description}}\n                            </legend>\n                            <div class=\"usa-radio margin-top-0\" *ngFor=\"let item of data?.modules?.spacing?.data\">\n                                <input class=\"usa-radio__input usa-radio__input--tile\"\n                                    id=\"accessibility-spacing-{{item.value}}\" type=\"radio\"\n                                    #radioInput\n                                    name=\"accessibility-spacing\"\n                                    [ngModel]=\"(weissAccessibilityCenterService.weissAccessibilitySettings$ | async)?.spacing\"\n                                    (ngModelChange)=\"weissAccessibilityCenterService.updateSettings({ spacing: $any($event) })\"\n                                    [value]=\"item.value\" />\n                                <label class=\"usa-radio__label\"\n                                    for=\"accessibility-spacing-{{item.value}}\">{{item.name}}</label>\n                            </div>\n                        </fieldset>\n                    </form>\n                </div>\n            </span>\n            <span *ngIf=\"data?.modules?.theme\" role=\"listitem\">\n                <h3 class=\"usa-accordion__heading\">\n                    <button type=\"button\" #accordionButton class=\"usa-accordion__button display-flex flex-align-center gap-1\" aria-controls=\"accessibilityTheme\" [attr.aria-expanded]=\"expand['theme']\">\n                    <svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\"\n                    class=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" stroke-width=\"2.25\"\n                    stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 3h-4a2 2 0 0 0 -2 2v12a4 4 0 0 0 8 0v-12a2 2 0 0 0 -2 -2\" /><path d=\"M13 7.35l-2 -2a2 2 0 0 0 -2.828 0l-2.828 2.828a2 2 0 0 0 0 2.828l9 9\" /><path d=\"M7.3 13h-2.3a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h12\" /><path d=\"M17 17l0 .01\" /></svg>\n                        {{data?.modules?.theme?.title}}\n                    </button>\n                </h3>\n                <div id=\"accessibilityTheme\" [hidden]=\"!expand['theme']\" class=\"usa-accordion__content usa-prose\">\n                    <form>\n                        <fieldset class=\"usa-fieldset usa-prose display-flex flex-column gap-05 usa-prose\">\n                            <legend class=\"usa-legend margin-top-0 margin-bottom-2\">\n                                {{data?.modules?.theme?.description}}\n                            </legend>\n                            <div class=\"usa-radio margin-top-0\" *ngFor=\"let item of data?.modules?.theme?.data\">\n                                <input class=\"usa-radio__input usa-radio__input--tile\"\n                                    id=\"accessibility-theme-{{item.value}}\" type=\"radio\" name=\"accessibility-theme\"\n                                    #radioInput\n                                    [ngModel]=\"(weissAccessibilityCenterService.weissAccessibilitySettings$ | async)?.theme\"\n                                    (ngModelChange)=\"weissAccessibilityCenterService.updateSettings({ theme: $any($event) })\"\n                                    [value]=\"item.value\" />\n                                <label class=\"usa-radio__label\"\n                                    for=\"accessibility-theme-{{item.value}}\">{{item.name}}</label>\n                            </div>\n                        </fieldset>\n                    </form>\n                </div>\n            </span>\n            <span *ngIf=\"data?.modules?.layout\" role=\"listitem\">\n                <h3 class=\"usa-accordion__heading\">\n                    <button type=\"button\" #accordionButton class=\"usa-accordion__button display-flex flex-align-center gap-1\" \n                        aria-controls=\"accessibilityLayout\" [attr.aria-expanded]=\"expand['layout']\">\n                        <svg  xmlns=\"http://www.w3.org/2000/svg\"  width=\"24\"  height=\"24\"  viewBox=\"0 0 24 24\"  fill=\"none\"  stroke=\"currentColor\"  stroke-width=\"2\"  stroke-linecap=\"round\"  stroke-linejoin=\"round\"  class=\"icon\"><path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z\" /><path d=\"M12 4l0 16\" /></svg>\n                        {{data?.modules?.layout?.title}}\n                    </button>\n                </h3>\n                <div id=\"accessibilityLayout\" [hidden]=\"!expand['layout']\" class=\"usa-accordion__content usa-prose\">\n                    <form>\n                        <fieldset class=\"usa-fieldset usa-prose display-flex flex-column gap-05 usa-prose\">\n                            <legend class=\"usa-legend margin-top-0 margin-bottom-2\">\n                                {{data?.modules?.layout?.description}}\n                            </legend>\n                            <div class=\"usa-radio margin-top-0\" *ngFor=\"let item of data?.modules?.layout?.data\">\n                                <input class=\"usa-radio__input usa-radio__input--tile\"\n                                    id=\"accessibility-layout-{{item.value}}\" type=\"radio\" name=\"accessibility-layout\"\n                                    #radioInput\n                                    [ngModel]=\"(weissAccessibilityCenterService.weissAccessibilitySettings$ | async)?.layout\"\n                                    (ngModelChange)=\"weissAccessibilityCenterService.updateSettings({ layout: $any($event) })\"\n                                    [value]=\"item.value\" />\n                                <label class=\"usa-radio__label\"\n                                    for=\"accessibility-layout-{{item.value}}\">{{item.name}}</label>\n                            </div>\n                        </fieldset>\n                    </form>\n                </div>\n            </span>\n        </div>\n    </div>\n    <div class=\"display-flex margin-top-2 gap-2 padding-x-2 padding-bottom-2\">\n        <button type=\"button\" class=\"usa-button usa-button--unstyled\"\n            (click)=\"weissAccessibilityCenterService.resetSettings(moduleKeys); statusMessageChange.emit(resetStatusMessage)\">{{ resetAllLabel || 'Reset all settings' }}</button>\n        <button type=\"button\" class=\"usa-button usa-button--unstyled\" (click)=\"close()\">{{ closeLabel || 'Close' }}</button>\n    </div>","import { Component, EventEmitter, Input, Output, SimpleChanges, ViewEncapsulation } from '@angular/core';\nimport { CommonModule, AsyncPipe } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { WeissAccessibilityCenterService } from '../../weiss-accessibility-center.service';\nimport { WeissAccessibilitySettings, ModuleTypes, PanelData } from '../../weiss-accessibility-center.interfaces';\n\n@Component({\n  selector: 'weiss-accessibility-strip',\n  standalone: true,\n  imports: [CommonModule, FormsModule, AsyncPipe],\n  templateUrl: './strip.component.html',\n  styleUrl: './strip.component.scss',\n  encapsulation: ViewEncapsulation.None,\n})\nexport class StripComponent {\n  @Input() data: PanelData | undefined;\n  @Input() closeLabel?: string;\n  @Input() resetLabel?: string;\n  @Input() resetStatusMessage?: string;\n  @Output() statusMessageChange = new EventEmitter<string>();\n\n  public moduleKeys: ModuleTypes[] = [];\n\n  public selectedModule: ModuleTypes | undefined = undefined;\n\n  public dynamicTabIndex: number = 3;\n  \n  @Input() closeSelectionPanel:boolean = false;\n  public showSelectionPanel:boolean = false;\n\n  public toggleModule(item: ModuleTypes): void {\n    // Open selection panel if not already open\n    // Close selection panel if open and selected module is already open\n    // Otherwise, leave panel open and update selected module\n    if (!this.showSelectionPanel) {\n      this.showSelectionPanel = true;\n    } else if (this.selectedModule === item) {\n      this.showSelectionPanel = false;\n    }\n    this.selectedModule = item;\n  }\n\n  get dynamicTabIndexValue(): number {\n    let tabIndex:number = -1;\n    if (this.selectedModule === 'fontSize') {\n      tabIndex = 3;\n    } else if (this.selectedModule === 'spacing') {\n      tabIndex = 5;\n    } else if (this.selectedModule === 'theme') {\n      tabIndex = 7;\n    } else if (this.selectedModule === 'layout') {\n      tabIndex = 9;\n    }\n    return tabIndex;\n  }\n\n  constructor(\n    public weissAccessibilityCenterService: WeissAccessibilityCenterService\n  ) {}\n\n  public close(): void {\n    this.weissAccessibilityCenterService.toggleWeissAccessibilityCenter(null, true);\n  }\n\n  onSettingsChange(module: ModuleTypes, value: string): void {\n    // Create an object with the dynamic key and updated value\n    const updatedSettings: Partial<WeissAccessibilitySettings> = { [module]: value };\n\n    // Call the service to update the settings with the dynamic key\n    this.weissAccessibilityCenterService.updateSettings(updatedSettings);\n  }\n\n  ngOnInit() {\n    if (this.data) {\n      console.log(this.data);\n      this.moduleKeys = Object.keys(this.data.modules) as ModuleTypes[];\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (\n      changes['closeSelectionPanel'] &&\n      changes['closeSelectionPanel'].currentValue === true\n    ) {\n      this.showSelectionPanel = false;\n    }\n  }\n}\n","<!-- axe-linter-disable -->\n<section class=\"weiss-accessibility-center-strip-wrapper\" \n    [ngClass]=\"{'weiss-accessibility-center-strip--right': data?.position === 'end' || data?.position === 'right', 'weiss-accessibility-center-strip--left': data?.position === 'start' || data?.position === 'left'}\">\n    <div class=\"weiss-accessibility-center-strip\">\n    <h2 id=\"accessibilityCenterTitle\" class=\"visually-hidden\">{{data?.title}}</h2>\n    <!-- Positive tabindex values intentionally used to create a linear navigation order when panel expands -->\n    <button tabindex=\"1\" #closeButton aria-controls=\"accessibilityCenter\" type=\"button\"\n            style=\"flex-direction: column;top:var(--usa-spacing-1)\" class=\"usa-button padding-1 usa-button--unstyled \"\n            (click)=\"close()\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"icon icon-tabler icon-tabler-x\" width=\"24\" height=\"24\"\n                viewBox=\"0 0 24 24\" stroke-width=\"3\" style=\"width:var(--usa-spacing-3);height:var(--usa-spacing-3)\"\n                stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n                <path d=\"M18 6l-12 12\" />\n                <path d=\"M6 6l12 12\" />\n            </svg>\n            {{ closeLabel || 'Close' }}\n        </button>\n        <div class=\"content\">\n            <button type=\"button\" tabindex=\"2\"\n                [ngClass]=\"{'bg-a11y-active': (weissAccessibilityCenterService.weissAccessibilitySettings$ | async)?.fontSize !== 'default'}\"\n                style=\"flex-direction: column;\"\n                class=\"usa-button padding-y-105 padding-x-105 usa-button--unstyled width-full\"\n                *ngIf=\"data?.modules?.fontSize\" \n                (click)=\"toggleModule('fontSize')\"\n                aria-describedby=\"fontSizeDescriptor\">\n                <span class=\"display-inline-block\">\n                    <svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\"\n                        class=\"icon icon-tabler icon-tabler-text-size\" width=\"24\" height=\"24\"\n                        style=\"--usa-button-icon-size:var(--usa-spacing-4)\" viewBox=\"0 0 24 24\" stroke-width=\"2.25\"\n                        stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                        <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n                        <path d=\"M3 7v-2h13v2\" />\n                        <path d=\"M10 5v14\" />\n                        <path d=\"M12 19h-4\" />\n                        <path d=\"M15 13v-1h6v1\" />\n                        <path d=\"M18 12v7\" />\n                        <path d=\"M17 19h2\" />\n                    </svg>\n                </span>\n                {{data?.modules?.fontSize?.title}}\n            </button>\n            <span class=\"visually-hidden\" id=\"fontSizeDescriptor\">{{data?.modules?.fontSize?.description}}</span>\n\n\n            <button type=\"button\" tabindex=\"4\"\n            (click)=\"toggleModule('spacing')\"\n                [ngClass]=\"{'bg-a11y-active': (weissAccessibilityCenterService.weissAccessibilitySettings$ | async)?.spacing !== 'default'}\"\n                style=\"flex-direction: column;\"\n                class=\"usa-button padding-y-105 padding-x-105 usa-button--unstyled width-full\"\n                *ngIf=\"data?.modules?.spacing\" aria-describedby=\"spacingDescriptor\">\n                <span class=\"display-inline-block\">\n                    <svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\"\n                        class=\"icon icon-tabler icon-tabler-text-size\" width=\"24\" height=\"24\"\n                        style=\"--usa-button-icon-size:var(--usa-spacing-4)\" viewBox=\"0 0 24 24\" stroke-width=\"2.25\"\n                        stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                        <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n                        <path d=\"M8 7l4 -4l4 4\" />\n                        <path d=\"M8 17l4 4l4 -4\" />\n                        <path d=\"M12 3l0 18\" />\n                    </svg>\n                </span>\n                {{data?.modules?.spacing?.title}}\n            </button>\n            <span class=\"visually-hidden\" id=\"spacingDescriptor\">{{data?.modules?.spacing?.description}}</span>\n\n            <button type=\"button\" tabindex=\"6\"\n            (click)=\"toggleModule('theme')\"\n                [ngClass]=\"{'bg-a11y-active': (weissAccessibilityCenterService.weissAccessibilitySettings$ | async)?.theme !== 'default'}\"\n                style=\"flex-direction: column;\"\n                class=\"usa-button padding-y-105 padding-x-105 usa-button--unstyled width-full\"\n                *ngIf=\"data?.modules?.theme\" aria-describedby=\"themeDescriptor\">\n                <span class=\"display-inline-block\">\n                    <svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\"\n                        class=\"icon icon-tabler icon-tabler-text-size\" width=\"24\" height=\"24\"\n                        style=\"--usa-button-icon-size:var(--usa-spacing-4)\" viewBox=\"0 0 24 24\" stroke-width=\"2\"\n                        stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                        <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n                        <path d=\"M19 3h-4a2 2 0 0 0 -2 2v12a4 4 0 0 0 8 0v-12a2 2 0 0 0 -2 -2\" />\n                        <path d=\"M13 7.35l-2 -2a2 2 0 0 0 -2.828 0l-2.828 2.828a2 2 0 0 0 0 2.828l9 9\" />\n                        <path d=\"M7.3 13h-2.3a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h12\" />\n                        <path d=\"M17 17l0 .01\" />\n                    </svg>\n                </span>\n                {{data?.modules?.theme?.title}}\n            </button>\n            <span class=\"visually-hidden\" id=\"themeDescriptor\">{{data?.modules?.theme?.description}}</span>\n\n            <button type=\"button\" tabindex=\"8\"\n            (click)=\"toggleModule('layout')\"\n                [ngClass]=\"{'bg-a11y-active': (weissAccessibilityCenterService.weissAccessibilitySettings$ | async)?.layout !== 'default'}\"\n                style=\"flex-direction: column;\"\n                class=\"usa-button padding-y-105 padding-x-105 usa-button--unstyled width-full\"\n                *ngIf=\"data?.modules?.layout\" aria-describedby=\"layoutDescriptor\">\n                <span class=\"display-inline-block\">\n                    <svg aria-hidden=\"true\" xmlns=\"http://www.w3.org/2000/svg\"\n                        class=\"icon icon-tabler icon-tabler-text-size\" width=\"24\" height=\"24\"\n                        style=\"--usa-button-icon-size:var(--usa-spacing-4)\" viewBox=\"0 0 24 24\" stroke-width=\"2\"\n                        stroke=\"currentColor\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                        <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n                        <path d=\"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z\" />\n                        <path d=\"M12 4l0 16\" />\n                    </svg>\n                </span>\n                {{data?.modules?.layout?.title}}\n            </button>\n            <span class=\"visually-hidden\" id=\"layoutDescriptor\">{{data?.modules?.layout?.description}}</span>\n        </div>\n        <button type=\"button\" style=\"flex-direction: column;\"\n            class=\"usa-button padding-y-105 padding-x-205 usa-button--unstyled width-full\" tabindex=\"10\"\n            (click)=\"weissAccessibilityCenterService.resetSettings(moduleKeys); statusMessageChange.emit(resetStatusMessage)\">{{ resetLabel || 'Reset' }}</button>\n\n    </div>\n    <div class=\"weiss-accessibility-center-strip-selection-panel\" *ngIf=\"showSelectionPanel\">\n        <form>\n            <ng-container *ngFor=\"let module of moduleKeys\" >\n                <fieldset class=\"usa-fieldset usa-prose display-flex flex-column gap-05 usa-prose\" *ngIf=\"selectedModule === module\">\n                    <legend class=\"usa-legend margin-top-0 margin-bottom-2\">\n                        {{data?.modules?.[module]?.description}}\n                    </legend>\n                    <div class=\"usa-radio margin-top-0\" *ngFor=\"let item of data?.modules?.[module]?.data\">\n                        <input [tabIndex]=\"dynamicTabIndexValue\" class=\"usa-radio__input usa-radio__input--tile\"\n                            id=\"accessibility-{{module}}-{{item.value}}\" type=\"radio\" name=\"accessibility-{{module}}\"\n                            [ngModel]=\"(weissAccessibilityCenterService.weissAccessibilitySettings$ | async)?.[module]\"\n                            (ngModelChange)=\"onSettingsChange(module, $any($event))\" [value]=\"item.value\" />\n                        <label class=\"usa-radio__label\"\n                            for=\"accessibility-{{module}}-{{item.value}}\">{{item.name}}</label>\n                    </div>\n                </fieldset>\n            </ng-container>\n        </form>\n    </div>\n</section>\n<!-- axe-linter-enable -->","import { WeissAccessibilityCenterService } from './weiss-accessibility-center.service';\nimport { AccessibilityOptions, ModuleDataOptions } from './weiss-accessibility-center.interfaces';\n\n/**\n * Translation accessor signature used to retrieve localized strings.\n * key: translation key\n * fallback: default English (or base) value when translation missing\n */\nexport type TranslationFn = (key: string, fallback: string) => string;\n\n/**\n * Factory method to create default accessibility options with optional translations.\n * A translation function can be provided to customize module titles, descriptions, and option labels.\n */\nexport function createAccessibilityOptions(\n  service: WeissAccessibilityCenterService,\n  t?: TranslationFn\n): AccessibilityOptions {\n  const tr = (key: string, fallback: string) => (t ? t(key, fallback) : fallback);\n\n  const mapOptionNames = (prefix: string, options: ModuleDataOptions[]): ModuleDataOptions[] =>\n    options.map(opt => ({\n      ...opt,\n      name: tr(`${prefix}Option${pascal(opt.value)}`, opt.name)\n    }));\n\n  return {\n    displayType: 'panel',\n    overlay: true,\n    position: 'end',\n    include: ['fontSize', 'theme', 'spacing', 'layout'],\n    title: tr('title', 'Accessibility settings'),\n    description: tr('description', 'Adjust the settings below to customize the appearance of this website.'),\n    multiSelectableAccordions: false,\n    fontSize: {\n      title: tr('fontSizeTitle', 'Text size'),\n      description: tr('fontSizeDescription', 'The text-size setting allows you to adjust how big or small the words appear on the screen.'),\n      data: mapOptionNames('fontSize', service.weissAccessibilityFontSizes),\n    },\n    theme: {\n      title: tr('themeTitle', 'Color theme'),\n      description: tr('themeDescription', 'The color theme setting allows you to adjust the color scheme of the website.'),\n      data: mapOptionNames('theme', service.weissAccessibilityThemes),\n    },\n    spacing: {\n      title: tr('spacingTitle', 'Spacing'),\n      description: tr('spacingDescription', 'The spacing setting lets you adjust the distance between elements on the page.'),\n      data: mapOptionNames('spacing', service.weissAccessibilitySpacing),\n    },\n    layout: {\n      title: tr('layoutTitle', 'Layout'),\n      description: tr('layoutDescription', 'The layout setting allows you to change how content is arranged on the screen.'),\n      data: mapOptionNames('layout', service.weissAccessibilityLayouts),\n    },\n  };\n}\n\n// Helper to convert values like 'dynamic-dark' to 'DynamicDark' for key construction\nfunction pascal(value: string): string {\n  return value\n    .split(/[^a-zA-Z0-9]/g)\n    .filter(Boolean)\n    .map(part => part.charAt(0).toUpperCase() + part.slice(1))\n    .join('');\n}\n","import {\n  Component,\n  HostListener,\n  Input,\n  SimpleChanges,\n  ViewChild,\n  ViewEncapsulation,\n  OnDestroy,\n  AfterViewInit,\n  Renderer2,\n  ElementRef\n} from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { PanelComponent } from \"./templates/panel/panel.component\";\nimport { StripComponent } from \"./templates/strip/strip.component\";\nimport {\n  AccessibilityOptions,\n  DisplayType,\n  ModuleOptions,\n  ModuleTypes,\n  PanelData,\n  PositionOptions,\n} from \"./weiss-accessibility-center.interfaces\";\nimport { WeissAccessibilityCenterService } from \"./weiss-accessibility-center.service\";\nimport { createAccessibilityOptions, TranslationFn } from \"./weiss-accessibility-center.factory\";\nimport { Subject, takeUntil } from \"rxjs\";\n\n@Component({\n  selector: \"weiss-accessibility-center\",\n  standalone: true,\n  template: `\n    <div\n      role=\"dialog\"\n      aria-labelledby=\"accessibilityCenterTitle\"\n      aria-modal=\"true\"\n      [attr.name]=\"accessibleName\"\n      [hidden]=\"!showWeissAccessibilityCenter\"\n      #center\n    >\n      <div\n        class=\"background-overlay\"\n        *ngIf=\"currentOptions.overlay\"\n        (click)=\"\n          weissAccessibilityCenterService.toggleWeissAccessibilityCenter(\n            null,\n            true\n          )\n        \"\n      ></div>\n      <ng-container *ngIf=\"currentOptions.displayType === 'panel'\">\n        <weiss-accessibility-panel\n          (statusMessageChange)=\"onStatusMessageChange($event)\"\n          [data]=\"data\"\n          [closeLabel]=\"closeLabel\"\n          [resetAllLabel]=\"resetAllLabel\"\n          [resetStatusMessage]=\"resetStatusMessage\"\n        ></weiss-accessibility-panel>\n      </ng-container>\n      <ng-container *ngIf=\"currentOptions.displayType === 'strip'\">\n        <weiss-accessibility-strip\n          [closeSelectionPanel]=\"forceCloseSelectionPanel\"\n          (statusMessageChange)=\"onStatusMessageChange($event)\"\n          [data]=\"data\"\n          [closeLabel]=\"closeLabel\"\n          [resetLabel]=\"resetLabel\"\n          [resetStatusMessage]=\"resetStatusMessage\"\n        ></weiss-accessibility-strip>\n      </ng-container>\n      <ng-container *ngIf=\"currentOptions.displayType === 'popover'\">\n        <!-- <weiss-accessibility-popover></weiss-accessibility-popover> -->\n      </ng-container>\n      <div\n        aria-live=\"polite\"\n        role=\"status\"\n        aria-atomic=\"true\"\n        id=\"statusMessage\"\n        class=\"visually-hidden\"\n      >\n        {{ statusMessage }}\n      </div>\n        </div>\n  `,\n  encapsulation: ViewEncapsulation.None,\n  imports: [CommonModule, PanelComponent, StripComponent]\n})\nexport class WeissAccessibilityCenterComponent implements OnDestroy, AfterViewInit {\n  @ViewChild(\"center\", { read: ElementRef }) centerEl!: ElementRef<HTMLElement>;\n\n  @Input() options: AccessibilityOptions | undefined;\n  @Input() title: string | undefined;\n  @Input() description: string | undefined;\n  @Input() displayType: DisplayType | undefined;\n  @Input() overlay: boolean | undefined;\n  @Input() position: PositionOptions | undefined;\n  @Input() modules: ModuleTypes[] | undefined;\n  @Input() fontSize: ModuleOptions | undefined;\n  @Input() theme: ModuleOptions | undefined;\n  @Input() spacing: ModuleOptions | undefined;\n  @Input() layout: ModuleOptions | undefined;\n  @Input() multiSelectableAccordions: boolean | undefined;\n  /**\n   * Optional language map for custom translations. Example:\n   * {\n   *   en: { title: 'Accessibility', description: '...' },\n   *   es: { title: 'Accesibilidad', description: '...' }\n   * }\n   */\n  @Input() languageMap?: { [lang: string]: { [key: string]: string } };\n  /**\n   * Currently selected language code\n   */\n  @Input() selectedLanguage?: string;\n\n  // Merged options object that will be used within the component\n  currentOptions: AccessibilityOptions;\n\n  public showWeissAccessibilityCenter = false;\n  public data: PanelData | undefined;\n\n  private firstFocusableElement: HTMLElement | null = null;\n  private lastFocusableElement: HTMLElement | null = null;\n  private focusableElementsString =\n    'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex=\"0\"], [contenteditable], li[tabindex=\"0\"], li[tabindex=\"-1\"], tr[tabindex=\"0\"], tr[tabindex=\"-1\"]';\n\n  public statusMessage: string = \"\";\n  public forceCloseSelectionPanel: boolean = false;\n\n  private focusTimeoutId: number | null = null;\n  private destroy$ = new Subject<void>();\n\n  public accessibleName = \"Weiss Accessibility Center\";\n\n  // Action label getters using translation function\n  get closeLabel(): string {\n    return this.translationFn('closeLabel', 'Close');\n  }\n  get resetAllLabel(): string {\n    return this.translationFn('resetAllLabel', 'Reset all settings');\n  }\n  get resetLabel(): string {\n    return this.translationFn('resetLabel', 'Reset');\n  }\n  get resetStatusMessage(): string {\n    return this.translationFn('resetStatusMessage', 'All settings have been reset to default.');\n  }\n\n  /**\n   * Returns the translated string for a given key, using languageMap if available\n   */\n  getTranslation(key: string, fallback: string): string {\n    if (\n      this.languageMap &&\n      this.selectedLanguage &&\n      this.languageMap[this.selectedLanguage] &&\n      this.languageMap[this.selectedLanguage][key]\n    ) {\n      return this.languageMap[this.selectedLanguage][key];\n    }\n    return fallback;\n  }\n\n  constructor(\n    public weissAccessibilityCenterService: WeissAccessibilityCenterService,\n    private renderer: Renderer2\n  ) {\n    this.currentOptions = createAccessibilityOptions(\n      this.weissAccessibilityCenterService,\n      this.translationFn\n    );\n    this.setupOptions();\n\n    this.weissAccessibilityCenterService.showWeissAccessibilityCenter$\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((show) => {\n        this.showWeissAccessibilityCenter = show;\n        this.forceCloseSelectionPanel = !show;\n\n        if (!show && this.focusTimeoutId !== null) {\n          clearTimeout(this.focusTimeoutId);\n          this.focusTimeoutId = null;\n        }\n\n        if (show) {\n          const focusableElements =\n            this.centerEl?.nativeElement.querySelectorAll(\n              this.focusableElementsString\n            ) as NodeListOf<HTMLElement>;\n          this.firstFocusableElement = focusableElements[0];\n          this.lastFocusableElement =\n            focusableElements[focusableElements.length - 1];\n\n          this.focusTimeoutId = window.setTimeout(() => {\n            this.firstFocusableElement?.focus();\n            this.focusTimeoutId = null;\n          }, 0);\n        }\n      });\n  }\n\n  ngAfterViewInit(): void {\n    // Apply id to the actual <div> after it's in the DOM\n    this.renderer.setAttribute(this.centerEl.nativeElement, 'id', 'weiss-accessibility-center');\n    this.weissAccessibilityCenterService.targetId$\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((id) => {\n        const value = id ?? 'weiss-accessibility-center';\n        this.renderer.setAttribute(this.centerEl.nativeElement, 'id', value);\n      });\n  }\n\n  // This method is triggered when the child component emits a new status message\n  onStatusMessageChange(newMessage: string) {\n    this.statusMessage = newMessage;\n  }\n\n  private scrollElementIntoView(element: Element) {\n    element.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"center\",\n    });\n  }\n\n  // Close panel when user hits escape key\n  // Trap focus within the accessibility center\n  @HostListener(\"keydown\", [\"$event\"])\n  handleKeyboardEvent(event: KeyboardEvent) {\n    if (this.showWeissAccessibilityCenter) {\n      const deepActiveElement = document.activeElement;\n      if (event.key === \"Tab\") {\n        if (event.shiftKey) {\n          /* shift + tab */\n          if (deepActiveElement === this.firstFocusableElement) {\n            event.preventDefault();\n            this.lastFocusableElement?.focus();\n          }\n        } else {\n          /* tab */\n          if (deepActiveElement === this.lastFocusableElement) {\n            event.preventDefault();\n            this.firstFocusableElement?.focus();\n          }\n        }\n        this.scrollElementIntoView(deepActiveElement as Element);\n      } else if (event.key === \"Escape\") {\n        this.weissAccessibilityCenterService.toggleWeissAccessibilityCenter(\n          null,\n          true\n        );\n        this.statusMessage = \"Accessibility center closed\";\n      } else if (event.key === \"ArrowUp\" || event.key === \"ArrowDown\") {\n        // Wait for DOM update\n        setTimeout(() => {\n          const activeElement = document.activeElement;\n          if (\n            activeElement &&\n            this.centerEl.nativeElement.contains(activeElement)\n          ) {\n            this.scrollElementIntoView(activeElement);\n          }\n        }, 0);\n      }\n    }\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (\n      changes[\"options\"] &&\n      changes[\"options\"].currentValue !== changes[\"options\"].previousValue\n    ) {\n      this.setupOptions();\n    } else if (\n      changes[\"title\"] &&\n      changes[\"title\"].currentValue !== changes[\"title\"].previousValue\n    ) {\n      this.setupOptions();\n    } else if (\n      changes[\"description\"] &&\n      changes[\"description\"].currentValue !==\n        changes[\"description\"].previousValue\n    ) {\n      this.setupOptions();\n    } else if (\n      changes[\"displayType\"] &&\n      changes[\"displayType\"].currentValue !==\n        changes[\"displayType\"].previousValue\n    ) {\n      this.setupOptions();\n    } else if (\n      changes[\"modules\"] &&\n      changes[\"modules\"].currentValue !== changes[\"modules\"].previousValue\n    ) {\n      this.setupOptions();\n    } else if (\n      changes[\"fontSize\"] &&\n      changes[\"fontSize\"].currentValue !== changes[\"fontSize\"].previousValue\n    ) {\n      this.setupOptions();\n    } else if (\n      changes[\"theme\"] &&\n      changes[\"theme\"].currentValue !== changes[\"theme\"].previousValue\n    ) {\n      this.setupOptions();\n    } else if (\n      changes[\"spacing\"] &&\n      changes[\"spacing\"].currentValue !== changes[\"spacing\"].previousValue\n    ) {\n      this.setupOptions();\n    } else if (\n      changes[\"layout\"] &&\n      changes[\"layout\"].currentValue !== changes[\"layout\"].previousValue\n    ) {\n      this.setupOptions();\n    } else if (\n      changes[\"overlay\"] &&\n      changes[\"overlay\"].currentValue !== changes[\"overlay\"].previousValue\n    ) {\n      this.setupOptions();\n    } else if (\n      changes[\"position\"] &&\n      changes[\"position\"].currentValue !== changes[\"position\"].previousValue\n    ) {\n      this.setupOptions();\n    } else if (\n      changes[\"multiSelectableAccordions\"] &&\n      changes[\"multiSelectableAccordions\"].currentValue !==\n        changes[\"multiSelectableAccordions\"].previousValue\n    ) {\n      this.setupOptions();\n    } else if (\n      (changes[\"languageMap\"] && changes[\"languageMap\"].currentValue !== changes[\"languageMap\"].previousValue) ||\n      (changes[\"selectedLanguage\"] && changes[\"selectedLanguage\"].currentValue !== changes[\"selectedLanguage\"].previousValue)\n    ) {\n      this.setupOptions();\n    }\n  }\n\n  setupOptions() {\n    // Merge the provided options with the default ones\n    const mergedOptions = {\n      ...createAccessibilityOptions(this.weissAccessibilityCenterService, this.translationFn),\n      ...this.options,\n    };\n\n    // If an option was passed individually, override in mergedOptions\n    // For title/description, use translation if available\n    mergedOptions.title = this.translationFn('title', this.title ?? mergedOptions.title ?? 'Accessibility settings');\n    mergedOptions.description = this.translationFn('description', this.description ?? mergedOptions.description ?? 'Adjust the settings below to customize the appearance of this website.');\n\n    if (this.displayType) {\n      mergedOptions.displayType = this.displayType;\n    }\n    if (this.overlay !== undefined) {\n      mergedOptions.overlay = this.overlay;\n    }\n    if (this.multiSelectableAccordions) {\n      mergedOptions.multiSelectableAccordions = this.multiSelectableAccordions;\n    }\n    if (this.position) {\n      mergedOptions.position = this.position;\n    }\n    if (this.modules) {\n      mergedOptions.include = this.modules;\n    }\n    if (this.fontSize) {\n      mergedOptions.fontSize = this.fontSize;\n      if (\n        mergedOptions.include &&\n        !mergedOptions.include.includes(\"fontSize\")\n      ) {\n        mergedOptions.include.push(\"fontSize\");\n      }\n    }\n    if (this.theme) {\n      mergedOptions.theme = this.theme;\n      if (mergedOptions.include && !mergedOptions.include.includes(\"theme\")) {\n        mergedOptions.include.push(\"theme\");\n      }\n    }\n    if (this.spacing) {\n      mergedOptions.spacing = this.spacing;\n      if (mergedOptions.include && !mergedOptions.include.includes(\"spacing\")) {\n        mergedOptions.include.push(\"spacing\");\n      }\n    }\n    if (this.layout) {\n      mergedOptions.layout = this.layout;\n      if (mergedOptions.include && !mergedOptions.include.includes(\"layout\")) {\n        mergedOptions.include.push(\"layout\");\n      }\n    }\n\n    // Now store the final merged options\n    this.currentOptions = mergedOptions;\n    this.data = this.buildData();\n  }\n\n  buildData() {\n    // Build the data object to pass to the panel\n    // Determine which modules to include based on the current options\n    const includedModules = this.currentOptions.include || [];\n    let moduleData: PanelData[\"modules\"] = {};\n    includedModules.forEach((module: ModuleTypes) => {\n      // Add the module to the data object\n      moduleData[module] = this.currentOptions[module];\n    });\n    const data: PanelData = {\n      title: this.currentOptions.title,\n      description: this.currentOptions.description,\n      modules: moduleData,\n      multiSelectableAccordions:\n        this.currentOptions.multiSelectableAccordions || false,\n      position: this.currentOptions.position || \"end\",\n    };\n    return data;\n  }\n\n  private translationFn: TranslationFn = (key: string, fallback: string) => {\n    if (\n      this.languageMap &&\n      this.selectedLanguage &&\n      this.languageMap[this.selectedLanguage] &&\n      this.languageMap[this.selectedLanguage][key]\n    ) {\n      return this.languageMap[this.selectedLanguage][key];\n    }\n    return fallback;\n  };\n\n  ngOnDestroy(): void {\n    if (this.focusTimeoutId !== null) {\n      clearTimeout(this.focusTimeoutId);\n      this.focusTimeoutId = null;\n    }\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n","// a11y-trigger.directive.ts\nimport {\n  Directive,\n  ElementRef,\n  Input,\n  Renderer2,\n  HostListener,\n  OnInit,\n  OnDestroy,\n  OnChanges,\n  SimpleChanges,\n} from '@angular/core';\nimport { WeissAccessibilityCenterService } from './weiss-accessibility-center.service';\nimport { Subscription } from 'rxjs';\n\n@Directive({\n  selector: '[weissA11yToggle]',\n  standalone: true,\n})\nexport class WeissAccessibilityToggleDirective implements OnInit, OnDestroy, OnChanges {\n  @Input('weissA11yToggle') targetId!: string;\n\n  private ariaExpanded: boolean = false;\n  private subscription: Subscription = new Subscription();\n\n  constructor(\n    private el: ElementRef,\n    private renderer: Renderer2,\n    private accessibilityService: WeissAccessibilityCenterService\n  ) {}\n\n  ngOnInit() {\n    // Set necessary ARIA attributes\n    this.renderer.setAttribute(this.el.nativeElement, 'aria-expanded', 'false');\n    this.renderer.setAttribute(this.el.nativeElement, 'aria-haspopup', 'true');\n\n    // If no id on the button, set one\n    if (!this.el.nativeElement.id) {\n      this.renderer.setAttribute(this.el.nativeElement, 'id', 'weiss-a11y-toggle');\n    }\n\n    // Initial push and aria-controls sync\n    this.pushTargetIdToService();\n    this.updateAriaControls();\n\n    // Ensure the element is focusable if it's not inherently focusable\n    this.makeElementFocusable();\n\n    // Subscribe to the widget visibility observable to update 'aria-expanded'\n    this.subscription =\n      this.accessibilityService.showWeissAccessibilityCenter$.subscribe(\n        (visible) => {\n          this.ariaExpanded = visible;\n          this.renderer.setAttribute(\n            this.el.nativeElement,\n            'aria-expanded',\n            String(this.ariaExpanded)\n          );\n          if (visible) {\n            this.renderer.addClass(this.el.nativeElement, 'weiss-a11y-active');\n          } else {\n            this.renderer.removeClass(this.el.nativeElement, 'weiss-a11y-active');\n          }\n        }\n      );\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes['targetId']) {\n      this.pushTargetIdToService();\n      this.updateAriaControls();\n    }\n  }\n\n  private pushTargetIdToService() {\n    this.accessibilityService.setTargetId(this.targetId ?? null);\n  }\n\n  private updateAriaControls() {\n    if (this.targetId) {\n      this.renderer.setAttribute(this.el.nativeElement, 'aria-controls', this.targetId);\n    } else {\n      this.renderer.removeAttribute(this.el.nativeElement, 'aria-controls');\n    }\n  }\n\n  // Ensure the element is focusable\n  private makeElementFocusable() {\n    const nodeName = this.el.nativeElement.nodeName.toLowerCase();\n    const focusableElements = ['a', 'button', 'input', 'textarea', 'select'];\n\n    if (!focusableElements.includes(nodeName)) {\n      // Add tabindex if not already present\n      if (!this.el.nativeElement.hasAttribute('tabindex')) {\n        this.renderer.setAttribute(this.el.nativeElement, 'tabindex', '0');\n      }\n      if (!this.el.nativeElement.hasAttribute('role')) {\n        this.renderer.setAttribute(this.el.nativeElement, 'role', 'button');\n      }\n    }\n  }\n\n  @HostListener('click', ['$event.target'])\n  onClick(target: HTMLElement) {\n    this.accessibilityService.toggleWeissAccessibilityCenter(target);\n  }\n\n  @HostListener('keydown', ['$event'])\n  onKeyDown(event: KeyboardEvent) {\n    if (\n      event.key === 'Enter' ||\n      event.key === ' ' ||\n      event.key === 'Spacebar'\n    ) {\n      event.preventDefault();\n      this.accessibilityService.toggleWeissAccessibilityCenter(this.el.nativeElement);\n    }\n  }\n\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n    // Optionally clear the id if this was the only trigger\n    // this.accessibilityService.setTargetId(null);\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule, AsyncPipe } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { WeissAccessibilityCenterComponent } from './weiss-accessibility-center.component';\nimport { WeissAccessibilityToggleDirective } from './weiss-accessibility-center.directive';\nimport { WeissAccessibilityCenterService } from './weiss-accessibility-center.service';\nimport { PanelComponent } from './templates/panel/panel.component';\nimport { StripComponent } from './templates/strip/strip.component';\n\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule,\n    FormsModule,\n    AsyncPipe,\n    WeissAccessibilityCenterComponent,\n    WeissAccessibilityToggleDirective,\n    StripComponent,\n    PanelComponent,\n  ],\n  providers: [WeissAccessibilityCenterService],\n  exports: [\n    WeissAccessibilityCenterComponent,\n    WeissAccessibilityToggleDirective\n  ]\n})\nexport class WeissAccessibilityCenterModule { }\n","/*\n * Public API Surface of weiss-accessibility-center\n */\n\nexport * from './lib/weiss-accessibility-center.service';\nexport * from './lib/weiss-accessibility-center.component';\nexport * from './lib/weiss-accessibility-center.interfaces';\nexport * from './lib/weiss-accessibility-center.directive';\nexport * from './lib/weiss-accessibility-center.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i1.WeissAccessibilityCenterService"],"mappings":"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"}